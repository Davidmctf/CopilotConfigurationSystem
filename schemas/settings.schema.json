{
  "$id": "https://github.com/Davidmctf/agents-promps/tree/main/schemas/settings.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "additionalProperties": true,
  "description": "Schema for validating $PWD\\.copilot\\config\\settings.json,  $PWD\\.cursor\\config\\settings.json, and IDE-specific settings in local projects - MULTI-IDE AGNOSTIC",
  "examples": [
    {
      "$schema": "$env:APPDATA\\Code\\User\\prompts\\schemas\\settings.schema.json",
      "agent": {
        "contextPath": "$APPDATA/Code/User/prompts/agents",
        "defaultAgent": "baseAgent",
        "maxConcurrentAgents": 3
      },
      "context": {
        "active": {
          "$schema": "$APPDATA/Code/User/prompts/schemas/context.schema.json",
          "maxSize": 1000,
          "path": "$PWD/.copilot/context/active-context.json",
          "updateFrequency": "onInteraction"
        },
        "core": {
          "$schema": "$APPDATA/Code/User/prompts/schemas/context.schema.json",
          "maxSize": 500,
          "path": "$PWD/.copilot/context/project-context.json",
          "updateTriggers": [
            "high",
            "critical"
          ]
        }
      },
      "env": {
        "globalConfigPath": "$APPDATA/Code/User/prompts"
      },
      "history": {
        "path": "$PWD/.copilot/.context-history/",
        "retention": {
          "decisions": 50,
          "issues": 100,
          "priority": "issues > tasks > decisions",
          "tasks": 200,
          "type": "[jsonl|sqlite]"
        }
      },
      "ideDetection": {
        "detectedIDE": "auto",
        "enabled": true,
        "useContextVS": false,
        "useCursorContext": false
      },
      "mcp": {
        "configPath": "$PWD/.mcp.json",
        "enabled": true
      },
      "model": {
        "allowUserOverride": true,
        "default": "copilot/claude-sonnet-4.5",
        "fallback": "copilot/claude-haiku-4.5"
      },
      "project": {
        "description": "Multi-IDE compatible project",
        "name": "my-project",
        "version": "1.0.0"
      }
    }
  ],
  "items": true,
  "properties": {
    "$schema": {
      "description": "Reference to this schema for validation",
      "type": "string"
    },
    "agent": {
      "description": "Agent configuration (IDE-agnostic - same for VS Code, Cursor, Visual Studio, Copilot CLI)",
      "properties": {
        "contextPath": {
          "description": "Path to agents directory (supports ${PWS} variable). Same for all IDEs.",
          "examples": [
            "$env:APPDATA\\Code\\User\\prompts",
            "$PWD\\.github\\prompts\\agents"
          ],
          "type": "string"
        },
        "defaultAgent": {
          "description": "Default agent to use (baseAgent, orchestratorAgent, etc.) - works identically across all IDEs",
          "examples": [
            "baseAgent",
            "orchestratorAgent"
          ],
          "type": "string"
        },
        "maxConcurrentAgents": {
          "default": 3,
          "description": "Maximum number of concurrent agents (identical across all IDEs)",
          "maximum": 10,
          "minimum": 1,
          "type": "integer"
        }
      },
      "required": [
        "defaultAgent"
      ],
      "type": "object"
    },
    "context": {
      "description": "Context management configuration (same semantics for all IDEs)",
      "properties": {
        "active": {
          "description": "Active context configuration (IDE-agnostic)",
          "properties": {
            "$schema": {
              "description": "Schema reference (supports ${globalConfigPath} variable)",
              "type": "string"
            },
            "addIfNotExists": {
              "default": true,
              "description": "Create file if it doesn't exist (all IDEs)",
              "type": "boolean"
            },
            "maxSize": {
              "description": "Maximum size in tokens (~800-1000 target)",
              "minimum": 100,
              "type": "integer"
            },
            "path": {
              "description": "Path to active-context.json. IDE-specific directory.",
              "type": "string"
            },
            "updateFrequency": {
              "default": "onInteraction",
              "description": "Update frequency (identical across all IDEs)",
              "enum": [
                "onInteraction",
                "onIdle",
                "manual"
              ],
              "type": "string"
            }
          },
          "required": [
            "path"
          ],
          "type": "object"
        },
        "core": {
          "description": "Core/project context configuration (IDE-agnostic)",
          "properties": {
            "$schema": {
              "description": "Schema reference (supports ${globalConfigPath} variable)",
              "type": "string"
            },
            "addIfNotExists": {
              "default": true,
              "description": "Create file if it doesn't exist (all IDEs)",
              "type": "boolean"
            },
            "maxSize": {
              "description": "Maximum size in tokens (~500 target)",
              "minimum": 100,
              "type": "integer"
            },
            "path": {
              "description": "Path to project-context.json. In .copilot/ for VS Code/CLI, .cursor/ for Cursor, .vs/ for VS",
              "type": "string"
            },
            "updateTriggers": {
              "description": "Triggers for updating context (same for all IDEs)",
              "items": {
                "enum": [
                  "low",
                  "medium",
                  "high",
                  "critical"
                ],
                "type": "string"
              },
              "type": "array"
            }
          },
          "required": [
            "path"
          ],
          "type": "object"
        }
      },
      "required": [
        "core",
        "active"
      ],
      "type": "object"
    },
    "env": {
      "description": "Environment variables for path resolution (IDE-agnostic)",
      "properties": {
        "globalConfigPath": {
          "description": "Path to global configuration repository ($PWD\\.github\\prompts or $env:APPDATAW\\Code\\User\\prompts). Used for all IDEs.",
          "type": "string"
        }
      },
      "required": [
        "globalConfigPath"
      ],
      "type": "object"
    },
    "environment": {
      "description": "Runtime environment configuration (read-only, set by system)",
      "properties": {
        "configPath": {
          "description": "Resolved local config path (IDE-specific)",
          "type": "string"
        },
        "detectedIDE": {
          "description": "Detected IDE at runtime",
          "enum": [
            "vscode",
            "cursor",
            "visualstudio",
            "copilot-cli"
          ],
          "type": "string"
        },
        "globalConfigPath": {
          "description": "Resolved global config path (same for all IDEs)",
          "type": "string"
        }
      },
      "type": "object"
    },
    "history": {
      "description": "History management configuration (multi-IDE support)",
      "properties": {
        "path": {
          "description": "Path to context history directory. IDE-specific location.",
          "type": "string"
        },
        "retention": {
          "description": "History retention policies (IDE-aware but semantically identical)",
          "properties": {
            "decisions": {
              "description": "Number of decisions to retain",
              "minimum": 0,
              "type": "integer"
            },
            "issues": {
              "description": "Number of issues to retain",
              "minimum": 0,
              "type": "integer"
            },
            "priority": {
              "description": "Retention priority order (same for all IDEs)",
              "type": "string"
            },
            "tasks": {
              "description": "Number of tasks to retain",
              "minimum": 0,
              "type": "integer"
            },
            "type": {
              "default": "sqlite",
              "description": "Storage format (identical across all IDEs)",
              "enum": [
                "jsonl",
                "json",
                "sqlite"
              ],
              "type": "string"
            },
            "useContextVS": {
              "default": false,
              "description": "Visual Studio only: Use .vs/ context if available",
              "type": "boolean"
            },
            "useCursorContext": {
              "default": false,
              "description": "Cursor only: Use .cursor/ context exclusively",
              "type": "boolean"
            }
          },
          "type": "object"
        }
      },
      "type": "object"
    },
    "ideDetection": {
      "description": "Multi-IDE detection and configuration",
      "properties": {
        "detectedIDE": {
          "default": "auto",
          "description": "IDE detection: auto (detect), or manual override",
          "enum": [
            "vscode",
            "cursor",
            "visualstudio",
            "copilot-cli",
            "auto"
          ],
          "type": "string"
        },
        "enabled": {
          "default": true,
          "description": "Enable automatic IDE detection",
          "type": "boolean"
        },
        "useContextVS": {
          "default": false,
          "description": "Visual Studio only: Use .vs/ context if available",
          "type": "boolean"
        },
        "useCursorContext": {
          "default": false,
          "description": "Cursor only: Use .cursor/ context exclusively",
          "type": "boolean"
        }
      },
      "type": "object"
    },
    "mcp": {
      "description": "MCP (Model Context Protocol) configuration (multi-IDE)",
      "properties": {
        "configPath": {
          "description": "Path to mcp.json (IDE-specific location)",
          "type": "string"
        },
        "COPILOT_USE_DEFAULTPROXY": {
          "default": false,
          "description": "Use default proxy settings (all IDEs)",
          "type": "boolean"
        },
        "enabled": {
          "default": true,
          "description": "Enable MCP servers (all IDEs support)",
          "type": "boolean"
        }
      },
      "type": "object"
    },
    "model": {
      "description": "Model selection (IDE-agnostic - all IDEs support same models)",
      "properties": {
        "allowUserOverride": {
          "default": true,
          "description": "Allow users to override model (all IDEs support)",
          "type": "boolean"
        },
        "default": {
          "default": "copilot/claude-sonnet-4.5",
          "description": "Default model (same support across all IDEs)",
          "enum": [
            "copilot/gpt-5-mini",
            "copilot/claude-haiku-4.5",
            "copilot/claude-3.5-sonnet",
            "copilot/claude-3.7-sonnet",
            "copilot/claude-3.7-sonnet-thought",
            "copilot/claude-sonnet-4",
            "copilot/claude-sonnet-4.5",
            "copilot/gemini-2.0-flash-001",
            "copilot/gemini-2.5-pro",
            "copilot/gpt-4.1",
            "copilot/gpt-4o",
            "copilot/gpt-5",
            "copilot/gpt-5-codex",
            "copilot/grok-code-fast-1",
            "copilot/o3-mini",
            "copilot/o4-mini"
          ],
          "type": "string"
        },
        "fallback": {
          "default": "copilot/claude-haiku-4.5",
          "description": "Fallback model (identical across all IDEs)",
          "enum": [
            "copilot/gpt-5-mini",
            "copilot/claude-haiku-4.5",
            "copilot/claude-3.5-sonnet",
            "copilot/claude-3.7-sonnet",
            "copilot/claude-3.7-sonnet-thought",
            "copilot/claude-sonnet-4",
            "copilot/claude-sonnet-4.5",
            "copilot/gemini-2.0-flash-001",
            "copilot/gemini-2.5-pro",
            "copilot/gpt-4.1",
            "copilot/gpt-4o",
            "copilot/gpt-5",
            "copilot/gpt-5-codex",
            "copilot/grok-code-fast-1",
            "copilot/o3-mini",
            "copilot/o4-mini"
          ],
          "type": "string"
        },
        "overrides": {
          "description": "Model overrides for specific tasks (same semantics for all IDEs)",
          "type": "object"
        }
      },
      "type": "object"
    },
    "project": {
      "description": "Project metadata (shared across all IDEs)",
      "properties": {
        "description": {
          "description": "Project description",
          "type": "string"
        },
        "name": {
          "description": "Project name",
          "minLength": 1,
          "type": "string"
        },
        "version": {
          "description": "Project version (semver)",
          "examples": [
            "1.0.0"
          ],
          "pattern": "^\\d+\\.\\d+\\.\\d+$",
          "type": "string"
        }
      },
      "required": [
        "name",
        "version"
      ],
      "type": "object"
    },
    "security": {
      "description": "Security configuration (IDE-agnostic)",
      "properties": {
        "approvalRequired": {
          "description": "Operations requiring user approval (identical across all IDEs)",
          "items": {
            "enum": [
              "low",
              "medium",
              "high",
              "critical"
            ],
            "type": "string"
          },
          "type": "array"
        },
        "restrictedOperations": {
          "description": "Operations that are restricted (same for all IDEs)",
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "type": "object"
    }
  },
  "required": [
    "project"
  ],
  "title": "Local Project Settings Schema",
  "type": "object"
}