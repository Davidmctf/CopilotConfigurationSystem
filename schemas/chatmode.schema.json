{
  "$id": "https://github.com/Davidmctf/agents-promps/tree/main/schemas/chatmode.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "additionalProperties": false,
  "description": "Schema for validating chat mode definitions that combine agents, profiles, and capabilities",
  "examples": [
    {
      "$schema": "../../schemas/chatmode.schema.json",
      "agent": "orchestratorAgent",
      "config": {
        "allowModeSwitch": true,
        "autoActivate": true,
        "defaultMode": false,
        "sessionPersistence": "conversation"
      },
      "context": {
        "historyEnabled": true,
        "maxContextSize": 8000,
        "projectAware": true,
        "workspaceAware": true
      },
      "description": "Multi-agent workflow coordination mode for complex tasks",
      "id": "agent-orchestrator",
      "metadata": {
        "author": "System",
        "category": "coordination",
        "created": "2025-10-15",
        "status": "stable",
        "tags": [
          "orchestration",
          "multi-agent",
          "workflows"
        ]
      },
      "name": "Agent Orchestrator",
      "profile": "collaborative",
      "triggers": {
        "keywords": [
          "orchestrate",
          "coordinate",
          "multi-step",
          "workflow"
        ],
        "patterns": [
          "^refactor .* across .*",
          "^implement .* in multiple .*"
        ]
      },
      "ui": {
        "color": "#6366F1",
        "description": "Coordinate complex multi-agent workflows",
        "icon": "ðŸŽ­"
      },
      "version": "1.0.0"
    },
    {
      "$schema": "../../schemas/chatmode.schema.json",
      "agent": "baseAgent",
      "capabilities": [
        "code-assistance",
        "context-awareness"
      ],
      "config": {
        "defaultMode": true
      },
      "context": {
        "maxContextSize": 4000,
        "priorityFiles": [
          "*.ts",
          "*.js",
          "*.py"
        ],
        "projectAware": true,
        "workspaceAware": true
      },
      "description": "Focused code development and assistance",
      "id": "code-assistant",
      "metadata": {
        "author": "System",
        "category": "development",
        "status": "stable"
      },
      "name": "Code Assistant",
      "profile": {
        "behavior": "focused",
        "interactionStyle": "conversational",
        "proactiveness": "balanced",
        "verbosity": "balanced"
      },
      "toolsets": [
        "basic",
        "git"
      ],
      "ui": {
        "color": "#10B981",
        "icon": "ðŸ’»"
      },
      "version": "1.0.0"
    }
  ],
  "properties": {
    "$schema": {
      "description": "Reference to this schema for validation",
      "type": "string"
    },
    "agent": {
      "description": "ID of the primary agent for this chat mode",
      "examples": [
        "baseAgent",
        "orchestratorAgent",
        "codeAssistant"
      ],
      "pattern": "^[a-zA-Z][a-zA-Z0-9_-]*$",
      "type": "string"
    },
    "capabilities": {
      "description": "Additional capabilities to enable beyond agent defaults (optional overrides)",
      "items": {
        "pattern": "^[a-z][a-z0-9-]*(\\.[a-z][a-z0-9-]*)*$",
        "type": "string"
      },
      "type": "array",
      "uniqueItems": true
    },
    "config": {
      "additionalProperties": true,
      "description": "Chat mode configuration",
      "properties": {
        "allowModeSwitch": {
          "default": true,
          "description": "Whether users can switch away from this mode",
          "type": "boolean"
        },
        "autoActivate": {
          "default": false,
          "description": "Whether this mode can auto-activate based on triggers",
          "type": "boolean"
        },
        "defaultMode": {
          "default": false,
          "description": "Whether this is the default chat mode",
          "type": "boolean"
        },
        "sessionPersistence": {
          "default": "conversation",
          "description": "How long to persist this mode once activated",
          "enum": [
            "none",
            "conversation",
            "workspace",
            "global"
          ],
          "type": "string"
        }
      },
      "type": "object"
    },
    "context": {
      "description": "Context management configuration",
      "properties": {
        "historyEnabled": {
          "default": true,
          "description": "Whether to maintain conversation history",
          "type": "boolean"
        },
        "maxContextSize": {
          "description": "Maximum context window size in tokens",
          "minimum": 100,
          "type": "integer"
        },
        "priorityFiles": {
          "description": "Files or patterns to prioritize in context",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "projectAware": {
          "default": true,
          "description": "Whether to understand project structure and configuration",
          "type": "boolean"
        },
        "workspaceAware": {
          "default": true,
          "description": "Whether to load and maintain workspace context",
          "type": "boolean"
        }
      },
      "type": "object"
    },
    "description": {
      "description": "Brief description of the chat mode's purpose and use cases",
      "type": "string"
    },
    "id": {
      "description": "Unique identifier for the chat mode",
      "examples": [
        "agent-orchestrator",
        "code-assistant",
        "pair-programmer"
      ],
      "pattern": "^[a-z][a-z0-9-]*$",
      "type": "string"
    },
    "metadata": {
      "additionalProperties": true,
      "properties": {
        "author": {
          "description": "Author or team",
          "type": "string"
        },
        "category": {
          "description": "Mode category",
          "enum": [
            "general",
            "development",
            "analysis",
            "coordination",
            "custom"
          ],
          "type": "string"
        },
        "created": {
          "description": "Creation date",
          "format": "date",
          "type": "string"
        },
        "documentation": {
          "description": "Path to documentation",
          "type": "string"
        },
        "status": {
          "description": "Maturity status",
          "enum": [
            "experimental",
            "beta",
            "stable",
            "deprecated"
          ],
          "type": "string"
        },
        "tags": {
          "description": "Tags for categorization",
          "items": {
            "type": "string"
          },
          "type": "array",
          "uniqueItems": true
        },
        "updated": {
          "description": "Last update date",
          "format": "date",
          "type": "string"
        }
      },
      "type": "object"
    },
    "model": {
      "default": "copilot/claude-sonnet-4.5",
      "description": "Model IA used",
      "enum": [
        "copilot/claude-sonnet-4.5",
        "copilot/claude-haiku-4.5",
        "copilot/gemini-2.0-flash-001",
        "copilot/gpt-4o"
      ],
      "type": "string"
    },
    "name": {
      "description": "Human-readable name of the chat mode",
      "examples": [
        "Agent Orchestrator",
        "Code Assistant",
        "Pair Programmer"
      ],
      "type": "string"
    },
    "profile": {
      "description": "Behavioral profile for this chat mode",
      "oneOf": [
        {
          "description": "ID of a predefined profile from chatmodes/profiles/",
          "pattern": "^[a-z][a-z0-9-]*$",
          "type": "string"
        },
        {
          "description": "Inline profile configuration",
          "properties": {
            "behavior": {
              "description": "Behavioral mode of the chat",
              "enum": [
                "focused",
                "collaborative",
                "exploratory",
                "analytical",
                "creative",
                "custom"
              ],
              "type": "string"
            },
            "interactionStyle": {
              "description": "Style of interaction with the user",
              "enum": [
                "directive",
                "conversational",
                "socratic",
                "advisory"
              ],
              "type": "string"
            },
            "proactiveness": {
              "description": "How proactively the agent suggests improvements",
              "enum": [
                "reactive",
                "balanced",
                "proactive"
              ],
              "type": "string"
            },
            "verbosity": {
              "description": "Level of detail in responses",
              "enum": [
                "concise",
                "balanced",
                "detailed"
              ],
              "type": "string"
            }
          },
          "type": "object"
        },
        {
          "description": "Use agent's default profile",
          "type": "null"
        }
      ]
    },
    "toolsets": {
      "description": "Additional toolsets to enable beyond agent defaults (optional overrides)",
      "items": {
        "pattern": "^[a-z][a-z0-9-]*$",
        "type": "string"
      },
      "type": "array",
      "uniqueItems": true
    },
    "triggers": {
      "description": "Conditions that trigger automatic activation of this chat mode",
      "properties": {
        "fileTypes": {
          "description": "File extensions that suggest this chat mode",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "keywords": {
          "description": "Keywords that activate this chat mode",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "patterns": {
          "description": "Regex patterns that activate this chat mode",
          "items": {
            "format": "regex",
            "type": "string"
          },
          "type": "array"
        }
      },
      "type": "object"
    },
    "ui": {
      "description": "UI presentation configuration",
      "properties": {
        "color": {
          "description": "Theme color for this mode (hex format)",
          "pattern": "^#[0-9A-Fa-f]{6}$",
          "type": "string"
        },
        "description": {
          "description": "Short description shown in mode selector",
          "type": "string"
        },
        "icon": {
          "description": "Icon identifier or emoji for this mode",
          "type": "string"
        }
      },
      "type": "object"
    },
    "version": {
      "description": "Semantic version of the chat mode",
      "examples": [
        "1.0.0",
        "2.1.0"
      ],
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "type": "string"
    }
  },
  "required": [
    "description",
    "model",
    "id",
    "version",
    "name",
    "agent"
  ],
  "title": "Chat Mode Schema",
  "type": "object"
}