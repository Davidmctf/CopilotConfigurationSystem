{
  "$id": "https://github.com/Davidmctf/agents-promps/tree/main/schemas/context.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "additionalProperties": true,
  "description": "Schema for validating project context and active state information",
  "examples": [
    {
      "$schema": "../../schemas/context.schema.json",
      "project": {
        "description": "Full-stack web application",
        "frameworks": [
          "Next.js",
          "FastAPI"
        ],
        "languages": [
          "TypeScript",
          "Python"
        ],
        "name": "my-app",
        "packageManager": "pnpm",
        "rootPath": "/workspace/my-app",
        "type": "application",
        "version": "1.0.0"
      },
      "structure": {
        "directories": {
          "backend": {
            "fileCount": 28,
            "path": "/workspace/my-app/backend",
            "purpose": "FastAPI server"
          },
          "frontend": {
            "fileCount": 42,
            "path": "/workspace/my-app/frontend",
            "purpose": "Next.js application"
          }
        },
        "entryPoints": [
          "frontend/src/pages/_app.tsx",
          "backend/main.py"
        ]
      },
      "timestamp": "2025-10-15T10:30:00Z",
      "type": "project",
      "version": "1.0.0"
    },
    {
      "$schema": "../../schemas/context.schema.json",
      "state": {
        "activeBranch": "feature/auth",
        "currentTask": {
          "description": "Implement user authentication",
          "id": "task-123",
          "priority": "high",
          "started": "2025-10-15T09:00:00Z",
          "status": "in-progress"
        },
        "recentFiles": [
          {
            "accessCount": 5,
            "lastAccessed": "2025-10-15T10:30:00Z",
            "path": "backend/routes/auth.py"
          }
        ],
        "uncommittedChanges": true
      },
      "timestamp": "2025-10-15T10:35:00Z",
      "type": "active",
      "version": "1.0.0"
    }
  ],
  "properties": {
    "$schema": {
      "description": "Reference to this schema for validation",
      "type": "string"
    },
    "conversation": {
      "description": "Conversation state (for type: session)",
      "properties": {
        "agent": {
          "description": "Active agent",
          "type": "string"
        },
        "messageCount": {
          "description": "Number of messages in conversation",
          "type": "integer"
        },
        "mode": {
          "description": "Active chat mode",
          "type": "string"
        },
        "sessionId": {
          "description": "Unique session identifier",
          "type": "string"
        },
        "started": {
          "description": "When conversation started",
          "format": "date-time",
          "type": "string"
        },
        "topics": {
          "description": "Topics discussed in this session",
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "type": "object"
    },
    "decisions": {
      "description": "Important decisions made during development",
      "items": {
        "properties": {
          "alternatives": {
            "description": "Alternatives that were considered",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "decision": {
            "description": "What was decided",
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "impact": {
            "enum": [
              "low",
              "medium",
              "high",
              "critical"
            ],
            "type": "string"
          },
          "rationale": {
            "description": "Why this decision was made",
            "type": "string"
          },
          "timestamp": {
            "format": "date-time",
            "type": "string"
          },
          "type": {
            "enum": [
              "architecture",
              "implementation",
              "tooling",
              "process"
            ],
            "type": "string"
          }
        },
        "required": [
          "id",
          "timestamp",
          "type",
          "decision"
        ],
        "type": "object"
      },
      "type": "array"
    },
    "issues": {
      "description": "Known issues and their status",
      "items": {
        "properties": {
          "category": {
            "enum": [
              "bug",
              "performance",
              "security",
              "compatibility",
              "other"
            ],
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "location": {
            "description": "File path or component",
            "type": "string"
          },
          "resolved": {
            "type": "boolean"
          },
          "resolvedAt": {
            "format": "date-time",
            "type": "string"
          },
          "severity": {
            "enum": [
              "info",
              "warning",
              "error",
              "critical"
            ],
            "type": "string"
          },
          "timestamp": {
            "format": "date-time",
            "type": "string"
          }
        },
        "required": [
          "id",
          "timestamp",
          "severity",
          "description"
        ],
        "type": "object"
      },
      "type": "array"
    },
    "metadata": {
      "description": "Context metadata",
      "properties": {
        "compressionApplied": {
          "description": "Whether compression was applied",
          "type": "boolean"
        },
        "generatedBy": {
          "description": "Agent or system that generated this context",
          "type": "string"
        },
        "maxSize": {
          "description": "Maximum allowed size",
          "type": "integer"
        },
        "size": {
          "description": "Context size in bytes or tokens",
          "type": "integer"
        }
      },
      "type": "object"
    },
    "preferences": {
      "description": "Project preferences and conventions",
      "properties": {
        "cicd": {
          "description": "CI/CD platform",
          "type": "string"
        },
        "codeStyle": {
          "description": "Preferred code style guide",
          "type": "string"
        },
        "conventions": {
          "additionalProperties": true,
          "description": "Project-specific conventions",
          "type": "object"
        },
        "testingFramework": {
          "description": "Testing framework in use",
          "type": "string"
        }
      },
      "type": "object"
    },
    "project": {
      "description": "Core project metadata (for type: project)",
      "properties": {
        "description": {
          "description": "Project description",
          "type": "string"
        },
        "frameworks": {
          "description": "Frameworks and major libraries",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "languages": {
          "description": "Primary programming languages used",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "name": {
          "description": "Project name",
          "type": "string"
        },
        "packageManager": {
          "description": "Package manager",
          "enum": [
            "npm",
            "yarn",
            "pnpm",
            "pip",
            "poetry",
            "cargo",
            "maven",
            "gradle",
            "other"
          ],
          "type": "string"
        },
        "rootPath": {
          "description": "Absolute path to project root",
          "type": "string"
        },
        "type": {
          "description": "Project type",
          "enum": [
            "application",
            "library",
            "monorepo",
            "documentation",
            "other"
          ],
          "type": "string"
        },
        "version": {
          "description": "Project version",
          "type": "string"
        }
      },
      "type": "object"
    },
    "state": {
      "description": "Current workspace state (for type: active)",
      "properties": {
        "activeBranch": {
          "description": "Current git branch",
          "type": "string"
        },
        "currentTask": {
          "description": "Current task being worked on",
          "properties": {
            "description": {
              "type": "string"
            },
            "id": {
              "type": "string"
            },
            "priority": {
              "enum": [
                "low",
                "medium",
                "high",
                "critical"
              ],
              "type": "string"
            },
            "started": {
              "format": "date-time",
              "type": "string"
            },
            "status": {
              "enum": [
                "pending",
                "in-progress",
                "completed",
                "blocked"
              ],
              "type": "string"
            }
          },
          "type": "object"
        },
        "openEditors": {
          "description": "Currently open editor tabs",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "recentFiles": {
          "description": "Recently accessed files",
          "items": {
            "properties": {
              "accessCount": {
                "type": "integer"
              },
              "lastAccessed": {
                "format": "date-time",
                "type": "string"
              },
              "path": {
                "type": "string"
              }
            },
            "type": "object"
          },
          "maxItems": 20,
          "type": "array"
        },
        "uncommittedChanges": {
          "description": "Whether there are uncommitted changes",
          "type": "boolean"
        }
      },
      "type": "object"
    },
    "structure": {
      "description": "Project structure information",
      "properties": {
        "configFiles": {
          "description": "Configuration files",
          "items": {
            "properties": {
              "lastModified": {
                "format": "date-time",
                "type": "string"
              },
              "path": {
                "type": "string"
              },
              "type": {
                "type": "string"
              }
            },
            "type": "object"
          },
          "type": "array"
        },
        "directories": {
          "description": "Important directories and their purposes",
          "patternProperties": {
            ".*": {
              "properties": {
                "fileCount": {
                  "type": "integer"
                },
                "path": {
                  "type": "string"
                },
                "purpose": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          },
          "type": "object"
        },
        "entryPoints": {
          "description": "Main entry points or important files",
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "type": "object"
    },
    "tasks": {
      "description": "Task tracking",
      "items": {
        "properties": {
          "assignedAgent": {
            "description": "Agent responsible for this task",
            "type": "string"
          },
          "completed": {
            "format": "date-time",
            "type": "string"
          },
          "created": {
            "format": "date-time",
            "type": "string"
          },
          "dependencies": {
            "description": "Task IDs this depends on",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "description": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "priority": {
            "enum": [
              "low",
              "medium",
              "high",
              "critical"
            ],
            "type": "string"
          },
          "status": {
            "enum": [
              "pending",
              "in-progress",
              "completed",
              "blocked",
              "cancelled"
            ],
            "type": "string"
          }
        },
        "required": [
          "id",
          "description",
          "status"
        ],
        "type": "object"
      },
      "type": "array"
    },
    "timestamp": {
      "description": "When this context was last updated (ISO 8601 format)",
      "format": "date-time",
      "type": "string"
    },
    "type": {
      "description": "Type of context: project (core metadata), active (current state), session (conversation state)",
      "enum": [
        "project",
        "active",
        "session"
      ],
      "type": "string"
    },
    "version": {
      "description": "Schema version",
      "examples": [
        "1.0.0"
      ],
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "type": "string"
    }
  },
  "required": [
    "version",
    "type",
    "timestamp"
  ],
  "title": "Context Schema",
  "type": "object"
}